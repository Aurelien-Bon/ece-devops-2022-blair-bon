apiVersion: v1
kind: Pod
metadata:
  name: server
  labels:
    app: node-redis
spec:
  containers:
    - name: server
      image: ahddry/server-devops-blair-bon-2022
      ports:
        - containerPort: 3000
      # data volume from where my-app read data those are written by redis
      volumeMounts:
        - name: data
          mountPath: /data
          readOnly: false
      env:
        - name: REDIS_HOST
          value: redis
        - name: REDIS_PORT
          value: "6379"
  volumes:
    - name: data
      persistentVolumeClaim:
        claimName: redis-data
